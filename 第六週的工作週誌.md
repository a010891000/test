# 2018/8/7

```
# 抓取溫濕度資料

%matplotlib inline


from pyquery import PyQuery as pq
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker


temperature_css = "td.temp1"
time_css = "tr+ tr th"
humidity_css = "td:nth-child(9)"
weather_url = "https://www.cwb.gov.tw/V7/observe/24real/Data/46692.htm"
html_doc = pq(weather_url) 
temperature = html_doc(temperature_css)
time = html_doc(time_css)
humidity = html_doc(humidity_css)

#print(temperature.text()) #確認資料是否有抓取到
#print(time.text()) #確認資料是否有抓取到
#print(humidity.text()) #確認資料是否有抓取到


time_list = []
for t in time:
    time_list.append(t.text)
time_list.sort()
#print(time_list) #確認資料是否有進入列表

temperature_list = []
for w in temperature:
     temperature_list.append(w.text)
#print(temperature_list) #確認資料是否有進入列表

humidity_list = []
for h in humidity:
    humidity_list.append(h.text)
#print(humidity_list) #確認資料是否有進入列表

## 溫度
plt.subplot(211) #plt.subplot(2,1,1) or plt.subplot(211) 表示將整個圖像窗口分為2行1列, 當前位置為1
plt.plot(time_list, temperature_list,label="$temperature$",color="red",linewidth=2)
plt.xlabel("Time")
plt.ylabel("°C") # ALT+0176 = °
plt.title("Temperature")
plt.legend()

##圖形優化
ax = plt.gca() # 獲取圖的座標信息

ax.xaxis.set_major_locator(ticker.LinearLocator(5))
ax.xaxis.set_minor_locator(ticker.LinearLocator(50))
ax.yaxis.set_major_locator(ticker.LinearLocator(10))
ax.yaxis.set_minor_locator(ticker.LinearLocator(50))

##濕度
plt.subplot(212) #plt.subplot(2,1,2) or plt.subplot(211) 表示將整個圖像窗口分為2行1列, 當前位置為2
plt.plot(time_list, humidity_list, label="$humidity$",color="blue",linewidth=2)
plt.xlabel("Time")
plt.ylabel("%")
plt.title("Humidity")
plt.legend()

ax = plt.gca()

ax.xaxis.set_major_locator(ticker.LinearLocator(5))
ax.xaxis.set_minor_locator(ticker.LinearLocator(50))
ax.yaxis.set_major_locator(ticker.LinearLocator(10))
ax.yaxis.set_minor_locator(ticker.LinearLocator(50))


plt.show()
```

![溫溼度](https://raw.githubusercontent.com/a010891000/test/master/image/download.png)

**但y軸排序出現問題尚未找到原因**

# 2018/8/8

畫流程圖+程式擴充清單

# 2018/8/9

Django過程

## Django 教程
Django 版本| Python 版本
----------|------------
1.8|2.7, 3.2, 3.3, 3.4, 3.5
1.9, 1.10|2.7, 3.4, 3.5
1.11|2.7, 3.4, 3.5, 3.6
2.0|3.5+

## Django 如何安裝

### yum 安装方法

安装 setuptools

命令：

```
yum install python-setuptools
```

完成之后，就可以使用 easy_install 命令安装 django

```
easy_install django
```

### pip 命令安装方法

```
pip install Django
```
## 創建第一個項目

使用 django-admin.py 來創建項目

```
django-admin.py startproject mysite # HelloWorld為自訂資料夾名稱，可依照自己喜好修改
```
最新版 Django 請使用 django-admin 命令

```
django-admin startproject mysite
```

創建完成後，可以查看項目的目錄結構

```
cd mysite
tree

.
├── manage.py
└── mysite
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py

```

目錄說明：

+ manage.py：一個實用的命令列工具，可讓你以各種方式與該 Django 項目進行交互
+ mysite：項目的容器(名稱自訂)

在 testdj 這個資料夾內的

+ __ init __.py：一個空文件，告訴 Python 該目錄是一個 Python 包
+ settings.py：該 Django 項目的設置
+ urls.py：該 Django 項目的 URL 聲明；一份由 Django 驅動的網站"目錄"
+ wsgi.py：一個 WSGI 兼容的 Web 服務器的入口，以便運行你的項目

`manage.py` 是 Django 提供的命令列工具，我們可以利用它執行很多工作，例如同步資料庫、建立 app 等等，指令的使用方式如下：

```
python manage.py <command> [options]
```

如果你想要了解有什麼指令可以使用，輸入 `help` 或 `-h` 指令會列出所有指令列表:

```
python manage.py -h
```

而如果想了解其中一個指令，可以在指令名字後輸入 `-h`，你會看到簡單的的指令介紹以及用法說明。以 `runserver` 為例：

```
~/testdj$ python manage.py runserver -h # $後才是要輸入的指令
usage: manage.py runserver [-h] [--version] [-v {0,1,2,3}]
                           [--settings SETTINGS] [--pythonpath PYTHONPATH]
                           [--traceback] [--no-color] [--ipv6] [--nothreading]
                           [--noreload] [--nostatic] [--insecure]
                           [addrport]

Starts a lightweight Web server for development and also serves static files.

positional arguments:
  addrport              Optional port number, or ipaddr:port

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  -v {0,1,2,3}, --verbosity {0,1,2,3}
                        Verbosity level; 0=minimal output, 1=normal output,
                        2=verbose output, 3=very verbose output
  --settings SETTINGS   The Python path to a settings module, e.g.
                        "myproject.settings.main". If this isn't provided, the
                        DJANGO_SETTINGS_MODULE environment variable will be
                        used.
  --pythonpath PYTHONPATH
                        A directory to add to the Python path, e.g.
                        "/home/djangoprojects/myproject".
  --traceback           Raise on CommandError exceptions
  --no-color            Don't colorize the command output.
  --ipv6, -6            Tells Django to use an IPv6 address.
  --nothreading         Tells Django to NOT use threading.
  --noreload            Tells Django to NOT use the auto-reloader.
  --nostatic            Tells Django to NOT automatically serve static files
                        at STATIC_URL.
  --insecure            Allows serving static files even if DEBUG is False.
```

#### 啟動開發伺服器 -- runserver

從說明中可以知道，`runserver` 會啟動一個簡單的 web server，方便於在開發階段使用：

```
~/testdj$ python manage.py runserver
...
Django version 1.8.5, using settings 'mysite.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
```

**要確實跑出網址才表示成功執行**


現在打開瀏覽器輸入 http://127.0.0.1:8000/ 或是 http://localhost:8000/，會看到你的 django 專案已成功在 web server 上執行

![success]()

可能遇到的問題
