# 2018/8/7

```
# 抓取溫濕度資料

%matplotlib inline


from pyquery import PyQuery as pq
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker


temperature_css = "td.temp1"
time_css = "tr+ tr th"
humidity_css = "td:nth-child(9)"
weather_url = "https://www.cwb.gov.tw/V7/observe/24real/Data/46692.htm"
html_doc = pq(weather_url) 
temperature = html_doc(temperature_css)
time = html_doc(time_css)
humidity = html_doc(humidity_css)

#print(temperature.text()) #確認資料是否有抓取到
#print(time.text()) #確認資料是否有抓取到
#print(humidity.text()) #確認資料是否有抓取到


time_list = []
for t in time:
    time_list.append(t.text)
time_list.sort()
#print(time_list) #確認資料是否有進入列表

temperature_list = []
for w in temperature:
     temperature_list.append(w.text)
#print(temperature_list) #確認資料是否有進入列表

humidity_list = []
for h in humidity:
    humidity_list.append(h.text)
#print(humidity_list) #確認資料是否有進入列表

## 溫度
plt.subplot(211) #plt.subplot(2,1,1) or plt.subplot(211) 表示將整個圖像窗口分為2行1列, 當前位置為1
plt.plot(time_list, temperature_list,label="$temperature$",color="red",linewidth=2)
plt.xlabel("Time")
plt.ylabel("°C") # ALT+0176 = °
plt.title("Temperature")
plt.legend()

##圖形優化
ax = plt.gca() # 獲取圖的座標信息

ax.xaxis.set_major_locator(ticker.LinearLocator(5))
ax.xaxis.set_minor_locator(ticker.LinearLocator(50))
ax.yaxis.set_major_locator(ticker.LinearLocator(10))
ax.yaxis.set_minor_locator(ticker.LinearLocator(50))

##濕度
plt.subplot(212) #plt.subplot(2,1,2) or plt.subplot(211) 表示將整個圖像窗口分為2行1列, 當前位置為2
plt.plot(time_list, humidity_list, label="$humidity$",color="blue",linewidth=2)
plt.xlabel("Time")
plt.ylabel("%")
plt.title("Humidity")
plt.legend()

ax = plt.gca()

ax.xaxis.set_major_locator(ticker.LinearLocator(5))
ax.xaxis.set_minor_locator(ticker.LinearLocator(50))
ax.yaxis.set_major_locator(ticker.LinearLocator(10))
ax.yaxis.set_minor_locator(ticker.LinearLocator(50))


plt.show()
```

![]()

# 2018/8/8

畫流程圖+程式擴充清單

# 2018/8/9

煩